<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Farmer Registration - AgroLink</title>
    <link rel="stylesheet" href="assets/css/style.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100..900;1,100..900&display=swap"
      rel="stylesheet"
    />
  </head>
  <body>
    <div class="split-container">
      <!-- Left: Quote & Image -->
      <div
        class="split-left"
        style="
          background: url('assets/img/registerpage/register5.jpg') center
            center/cover no-repeat;
        "
      >
        <div class="split-left-content">
          <p>
            The demand for organic food is growing at a remarkable rate.<br />
            Consumers have made it clear that they want organic produce.
          </p>
        </div>
      </div>
      <!-- Right: Registration Form -->
      <div class="split-right">
        <div class="form-box">
          <div style="text-align: right; margin-bottom: 0.5rem">
            <select
              id="registerRoleSelect"
              class="role-switcher"
              aria-label="Register as"
            >
              <option value="" disabled selected hidden>Register as...</option>
              <option value="buyer">Register as a Buyer</option>
              <option value="transporter">Register as a Transporter</option>
            </select>
          </div>
          <h1>Create AgroLink Account</h1>
          <div class="subtitle">
            Enter your email and password to create your account
          </div>
          <form id="registerFarmerForm" autocomplete="off">
            <div class="form-group">
              <label for="fullName">Name</label>
              <input
                type="text"
                id="fullName"
                name="fullName"
                class="form-control"
                required
                placeholder="Your name"
              />
            </div>
            <div class="form-group">
              <label for="email">Email</label>
              <input
                type="email"
                id="email"
                name="email"
                class="form-control"
                required
                placeholder="you@example.com"
              />
            </div>
            <div class="form-group">
              <label for="password">Password</label>
              <input
                type="password"
                id="password"
                name="password"
                class="form-control"
                required
                placeholder="********"
              />
            </div>
            <div class="form-group">
              <label for="confirmPassword">Confirm Password</label>
              <input
                type="password"
                id="confirmPassword"
                name="confirmPassword"
                class="form-control"
                required
                placeholder="********"
              />
            </div>
            <button type="submit" class="btn btn-primary btn-large">
              Create Account
            </button>
          </form>
          <div class="or-divider">Or continue with</div>
          <button class="google-btn" type="button" onclick="loginWithGoogle()">
            <img
              src="https://www.svgrepo.com/show/475656/google-color.svg"
              alt="Google"
              class="google-icon"
            />
            Google
          </button>
          <div class="text-center">
            Already have an account?
            <a href="login.html">Sign in here</a>
          </div>
        </div>
      </div>
    </div>
    <script>
      function loginWithGoogle() {
        // Placeholder for Google login integration
        alert("Google login coming soon!");
      }
      // Real registration logic
      document.getElementById("registerFarmerForm").addEventListener("submit", async function (e) {
        e.preventDefault();
        const fullName = document.getElementById("fullName").value.trim();
        const email = document.getElementById("email").value.trim();
        const password = document.getElementById("password").value;
        const confirmPassword = document.getElementById("confirmPassword").value;
        // You can add more fields here if needed (phone, location, etc.)
        const payload = {
          full_name: fullName,
          email: email,
          password: password,
          confirm_password: confirmPassword,
          role: "farmer"
        };
        try {
          const res = await fetch("auth/register.php", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify(payload)
          });
          const data = await res.json();
          if (data.success) {
            alert("Registration successful! Please login.");
            window.location.href = "login.html";
          } else {
            alert("Registration failed: " + (data.message || "Unknown error"));
          }
        } catch (err) {
          alert("Network or server error. Please try again later.");
        }
      });
      document.getElementById("registerRoleSelect").addEventListener("change", function () {
        if (this.value === "buyer") {
          window.location.href = "register_buyer.html";
        } else if (this.value === "transporter") {
          window.location.href = "register_transporter.html";
        }
      });
    </script>
  </body>
</html>
