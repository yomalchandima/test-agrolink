<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Order Successful - AgroLink</title>
    <link rel="stylesheet" href="assets/css/style.css">
</head>
<body>
    <!-- Header -->
    <header class="header">
        <nav class="nav container">
            <div class="logo">
                <img src="assets/img/Logo.png" alt="AgroLink" style="height: 40px;">
            </div>
            <div class="nav-links">
                <a href="index.html">Home</a>
                <a href="products.html">Products</a>
            </div>
            <div class="nav-actions">
                <div class="user-info"></div>
            </div>
        </nav>
    </header>

    <!-- Success Content -->
    <section class="section" style="min-height: 70vh; display: flex; align-items: center;">
        <div class="container">
            <div class="text-center">
                <!-- Success Animation -->
                <div style="font-size: 6rem; color: var(--primary-green); margin-bottom: var(--spacing-lg); animation: bounce 2s infinite;">
                    ‚úÖ
                </div>
                
                <h1 style="color: var(--primary-green); margin-bottom: var(--spacing-md);">Order Placed Successfully!</h1>
                <p style="font-size: 1.2rem; color: var(--dark-gray); margin-bottom: var(--spacing-lg);">
                    Thank you for your order. Your fresh produce is being prepared for delivery.
                </p>
                
                <!-- Order Details Card -->
                <div class="card" style="max-width: 600px; margin: 0 auto var(--spacing-xl);">
                    <div style="padding: var(--spacing-xl);">
                        <h2 style="margin-bottom: var(--spacing-lg);">üìã Order Details</h2>
                        
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: var(--spacing-md); margin-bottom: var(--spacing-lg);">
                            <div>
                                <strong>Order ID:</strong><br>
                                <span id="orderId" style="color: var(--primary-green); font-family: monospace;">Loading...</span>
                            </div>
                            <div>
                                <strong>Order Date:</strong><br>
                                <span id="orderDate">Loading...</span>
                            </div>
                            <div>
                                <strong>Total Amount:</strong><br>
                                <span id="orderTotal" style="color: var(--primary-green); font-weight: var(--font-weight-bold);">Loading...</span>
                            </div>
                            <div>
                                <strong>Payment Method:</strong><br>
                                <span id="paymentMethod">Loading...</span>
                            </div>
                        </div>
                        
                        <div id="orderItems" style="margin-bottom: var(--spacing-lg);">
                            <!-- Order items will be populated by JavaScript -->
                        </div>
                        
                        <div class="notification success">
                            <strong>What's Next?</strong><br>
                            ‚Ä¢ You'll receive an email confirmation shortly<br>
                            ‚Ä¢ Farmers will prepare your order<br>
                            ‚Ä¢ Delivery will be coordinated with transporters<br>
                            ‚Ä¢ Track your order in your dashboard
                        </div>
                    </div>
                </div>
                
                <!-- Action Buttons -->
                <div style="display: flex; gap: var(--spacing-md); justify-content: center; flex-wrap: wrap;">
                    <a href="dashboard_buyer.html" class="btn btn-primary btn-large">üìä View Dashboard</a>
                    <a href="products.html" class="btn btn-secondary btn-large">üõí Continue Shopping</a>
                    <button onclick="window.print()" class="btn btn-secondary">üñ®Ô∏è Print Receipt</button>
                </div>
            </div>
        </div>
    </section>

    <!-- Next Steps -->
    <section class="section bg-light">
        <div class="container">
            <h2 class="section-title">What Happens Next?</h2>
            <div class="grid grid-3">
                <div class="card text-center">
                    <div style="font-size: 3rem; margin-bottom: var(--spacing-md);">üìß</div>
                    <h3>1. Confirmation</h3>
                    <p>You'll receive an email confirmation with order details and tracking information.</p>
                </div>
                <div class="card text-center">
                    <div style="font-size: 3rem; margin-bottom: var(--spacing-md);">üë®‚Äçüåæ</div>
                    <h3>2. Preparation</h3>
                    <p>Farmers will prepare your fresh produce and coordinate with transporters for delivery.</p>
                </div>
                <div class="card text-center">
                    <div style="font-size: 3rem; margin-bottom: var(--spacing-md);">üöö</div>
                    <h3>3. Delivery</h3>
                    <p>Your order will be delivered fresh to your doorstep within 1-3 business days.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Customer Support -->
    <section class="section">
        <div class="container">
            <div class="card" style="max-width: 800px; margin: 0 auto;">
                <div style="padding: var(--spacing-xl); text-align: center;">
                    <h2>Need Help with Your Order?</h2>
                    <p style="margin: var(--spacing-lg) 0;">Our customer support team is here to help you with any questions or concerns.</p>
                    
                    <div class="grid grid-3" style="margin-top: var(--spacing-lg);">
                        <div>
                            <strong>üìû Phone Support</strong><br>
                            <span style="color: var(--dark-gray);">+94 xxx xxx xxx</span><br>
                            <small>Mon-Fri 8AM-6PM</small>
                        </div>
                        <div>
                            <strong>üìß Email Support</strong><br>
                            <span style="color: var(--dark-gray);">support@agrolink.lk</span><br>
                            <small>24/7 Response</small>
                        </div>
                        <div>
                            <strong>üí¨ Live Chat</strong><br>
                            <span style="color: var(--dark-gray);">Available on website</span><br>
                            <small>Mon-Fri 8AM-6PM</small>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>AgroLink</h3>
                    <p>Empowering agricultural trade across Sri Lanka through digital innovation.</p>
                </div>
                <div class="footer-section">
                    <h3>Customer Support</h3>
                    <a href="#help">Help Center</a>
                    <a href="#contact">Contact Us</a>
                    <a href="#returns">Returns & Refunds</a>
                    <a href="#tracking">Order Tracking</a>
                </div>
                <div class="footer-section">
                    <h3>Legal</h3>
                    <a href="#terms">Terms & Conditions</a>
                    <a href="#privacy">Privacy Policy</a>
                    <a href="#cookies">Cookie Policy</a>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2025 AgroLink - UCSC Project. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <script src="assets/js/main.js"></script>
    <script>
        // CSS for bounce animation
        const style = document.createElement('style');
        style.textContent = `
            @keyframes bounce {
                0%, 20%, 50%, 80%, 100% {
                    transform: translateY(0);
                }
                40% {
                    transform: translateY(-20px);
                }
                60% {
                    transform: translateY(-10px);
                }
            }
        `;
        document.head.appendChild(style);

        // Get order ID from URL parameters
        function getOrderIdFromUrl() {
            const urlParams = new URLSearchParams(window.location.search);
            return urlParams.get('order');
        }

        // Load order details
        function loadOrderDetails() {
            const orderId = getOrderIdFromUrl();
            
            if (!orderId) {
                showNotification('Order not found. Redirecting...', 'error');
                setTimeout(() => {
                    window.location.href = 'products.html';
                }, 2000);
                return;
            }

            // Get order from localStorage
            const orders = JSON.parse(localStorage.getItem('agrolink_orders')) || [];
            const order = orders.find(o => o.id === orderId);

            if (!order) {
                showNotification('Order not found. Redirecting...', 'error');
                setTimeout(() => {
                    window.location.href = 'products.html';
                }, 2000);
                return;
            }

            // Populate order details
            document.getElementById('orderId').textContent = order.id;
            document.getElementById('orderDate').textContent = new Date(order.orderDate).toLocaleDateString('en-US', {
                year: 'numeric',
                month: 'long',
                day: 'numeric',
                hour: '2-digit',
                minute: '2-digit'
            });
            document.getElementById('orderTotal').textContent = `Rs. ${order.total.toFixed(2)}`;
            
            // Format payment method
            const paymentMethods = {
                'cod': 'üíµ Cash on Delivery',
                'bank': 'üè¶ Bank Transfer',
                'mobile': 'üì± Mobile Payment',
                'card': 'üí≥ Credit/Debit Card'
            };
            document.getElementById('paymentMethod').textContent = paymentMethods[order.paymentMethod] || order.paymentMethod;

            // Populate order items
            const orderItemsContainer = document.getElementById('orderItems');
            orderItemsContainer.innerHTML = `
                <div style="border: 1px solid var(--medium-gray); border-radius: var(--radius-md); padding: var(--spacing-md);">
                    <h4 style="margin-bottom: var(--spacing-md);">Ordered Items</h4>
                    ${order.items.map(item => `
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: var(--spacing-sm); padding-bottom: var(--spacing-sm); border-bottom: 1px solid var(--light-gray);">
                            <div style="display: flex; align-items: center; gap: var(--spacing-sm);">
                                <div style="width: 40px; height: 40px; background: var(--light-green); border-radius: var(--radius-md); display: flex; align-items: center; justify-content: center;">
                                    ${item.image || 'ü•¨'}
                                </div>
                                <div>
                                    <div style="font-weight: var(--font-weight-bold);">${item.name}</div>
                                    <div style="font-size: 0.9rem; color: var(--dark-gray);">by ${item.farmer}</div>
                                    <div style="font-size: 0.9rem; color: var(--dark-gray);">Rs. ${item.price}/kg √ó ${item.quantity}</div>
                                </div>
                            </div>
                            <div style="font-weight: var(--font-weight-bold); color: var(--primary-green);">
                                Rs. ${(item.price * item.quantity).toFixed(2)}
                            </div>
                        </div>
                    `).join('')}
                </div>
            `;
        }

        // Initialize page
        document.addEventListener('DOMContentLoaded', function() {
            loadOrderDetails();
            
            // Show success notification
            setTimeout(() => {
                showNotification('Order confirmation email will be sent shortly!', 'success');
            }, 1000);
        });
    </script>
</body>
</html>
